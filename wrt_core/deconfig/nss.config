# ==============================================
# 京东云 re-ss-01 (IPQ6000/512MB) NSS 专属配置
# 核心：主路由 + 禁用WiFi + NSS加速 + 链路聚合 + 保留IPv6隧道
# ==============================================

# 1. 全局内存配置（512MB必选）
CONFIG_IPQ_MEM_PROFILE_512=y

# 2. WiFi相关配置（彻底禁用）
CONFIG_ATH11K_MEM_PROFILE_512M=n
CONFIG_PACKAGE_kmod-ath11k-pci=n
CONFIG_PACKAGE_kmod-qca-mcs=n
CONFIG_NSS_DRV_WIFI_MESH_ENABLE=n
CONFIG_PACKAGE_MAC80211_MESH=n
CONFIG_ATH11K_NSS_MESH_SUPPORT=n
CONFIG_NSS_DRV_WIFIOFFLOAD_ENABLE=n
CONFIG_NSS_DRV_WIFI_EXT_VDEV_ENABLE=n

# 3. NSS核心性能+功能开关（主路由+链路聚合+IPv6隧道）
CONFIG_NSS_MEM_PROFILE_HIGH=y             # HIGH模式支撑隧道高并发
CONFIG_NSS_FIRMWARE_VERSION_11_4=y
CONFIG_NSS_DRV_BRIDGE_ENABLE=y            # 桥接基础
CONFIG_NSS_DRV_CRYPTO_ENABLE=y            # 硬件加密
CONFIG_NSS_DRV_IGS_ENABLE=y               # 组播加速
CONFIG_NSS_DRV_IPV6_ENABLE=y              # IPv6基础转发
CONFIG_NSS_DRV_PPPOE_ENABLE=y             # PPPoE拨号加速
CONFIG_NSS_DRV_SHAPER_ENABLE=y            # 流量整形
CONFIG_NSS_DRV_VIRT_IF_ENABLE=y           # 虚拟接口
CONFIG_NSS_DRV_VLAN_ENABLE=y              # VLAN加速
CONFIG_NSS_DRV_LAG_ENABLE=y               # 链路聚合加速
CONFIG_NSS_DRV_TUN6RD_ENABLE=y            # 新增：启用6RD隧道功能开关
CONFIG_NSS_DRV_TUNIPIP6_ENABLE=y          # 新增：启用IPIP6隧道功能开关
# 禁用其他无用功能开关
CONFIG_NSS_DRV_GRE_ENABLE=n
CONFIG_NSS_DRV_L2TP_ENABLE=n
CONFIG_NSS_DRV_MAPT_ENABLE=n
CONFIG_NSS_DRV_MATCH_ENABLE=n
CONFIG_NSS_DRV_MIRROR_ENABLE=n
CONFIG_NSS_DRV_PPTP_ENABLE=n
CONFIG_NSS_DRV_VXLAN_ENABLE=n

# 4. 内核级网络优化
CONFIG_KERNEL_SKB_RECYCLER=y
CONFIG_KERNEL_SKB_RECYCLER_MULTI_CPU=y

# 5. NSS驱动模块（核心+链路聚合+IPv6隧道）
CONFIG_PACKAGE_sqm-scripts-nss=y
CONFIG_PACKAGE_kmod-qca-nss-drv-bridge-mgr=y
CONFIG_PACKAGE_kmod-qca-nss-drv-igs=y
CONFIG_PACKAGE_kmod-qca-nss-drv-pppoe=y
CONFIG_PACKAGE_kmod-qca-nss-drv-qdisc=y
CONFIG_PACKAGE_kmod-qca-nss-drv-vlan-mgr=y
CONFIG_PACKAGE_kmod-qca-nss-drv-lag-mgr=y # 链路聚合驱动
CONFIG_PACKAGE_kmod-qca-nss-drv-tun6rd=y  # 启用：6RD隧道驱动
CONFIG_PACKAGE_kmod-qca-nss-drv-tunipip6=y# 启用：IPIP6隧道驱动
# 禁用其他冗余驱动
CONFIG_PACKAGE_kmod-qca-nss-drv-eogremgr=n
CONFIG_PACKAGE_kmod-qca-nss-drv-gre=n
CONFIG_PACKAGE_kmod-qca-nss-drv-l2tpv2=n
CONFIG_PACKAGE_kmod-qca-nss-drv-map-t=n
CONFIG_PACKAGE_kmod-qca-nss-drv-match=n
CONFIG_PACKAGE_kmod-qca-nss-drv-mirror=n
CONFIG_PACKAGE_kmod-qca-nss-drv-pptp=n
CONFIG_PACKAGE_kmod-qca-nss-drv-vxlanmgr=n
CONFIG_PACKAGE_kmod-qca-nss-drv-wifi-meshmgr=n
